[build]
  # 构建命令
  command = "npm run build"
  # 发布目录
  publish = "dist"

[[redirects]]
  # SPA路由重定向 - 由于使用了Hash路由，这个重定向规则实际上不是必需的
  # 但为了完整性，仍然保留（Hash路由在客户端处理，不经过服务器）
  from = "/*"
  to = "/index.html"
  status = 200

# 配置响应头，支持跨域请求
[[headers]]
  for = "/*"
  [headers.values]
    # 允许的请求来源（前端域名）
    Access-Control-Allow-Origin = "https://flag.xianbeikeji.com"
    # 允许的请求方法
    Access-Control-Allow-Methods = "GET, POST, PUT, DELETE, OPTIONS, PATCH"
    # 允许的请求头（包括自定义的 token 请求头）
    Access-Control-Allow-Headers = "Content-Type, Authorization, token, X-Requested-With, Accept, Origin"
    # 允许携带凭证（cookie等），因为代码中使用了 withCredentials = true
    Access-Control-Allow-Credentials = "true"
    # 预检请求的缓存时间（秒）
    Access-Control-Max-Age = "3600"

